<div class="d-flex h-100">
  <div class="col-lg-5 col-md-5 d-flex signup-form">
    <div class="header-text">
      <img src="../../../assets/images/icons/vidhiklogo.svg" alt="vidhik" />

      <div class="welcome-text mt-4 mb-4">Create an account</div>

      <div class="sub-text mt-3 mb-3" *ngIf="!otpVerified">
        Please enter your mobile no. and we will send you 6 digit code via text
        message
      </div>
    </div>

    <form
      [formGroup]="signupForm"
      class="col mt-3"
      *ngIf="!otpVerified"
      class="otp-form"
    >
      <mat-form-field appearance="outline">
        <span matPrefix
          ><mat-icon
            ><img src="../../../assets/images/icons/phone-icon.svg" /></mat-icon
        ></span>
        <input
          type="text"
          matInput
          placeholder="9875642535"
          formControlName="mobile"
          required
          maxlength="10"
          (keypress)="isNumber($event)"
        />
        <mat-error *ngIf="signupForm.controls['mobile'].hasError('required')"
          >Mobile No. is Required</mat-error
        >
        <mat-error
          *ngIf="
            !signupForm.controls['mobile'].hasError('required') &&
            signupForm.controls['mobile'].invalid
          "
          >Mobile No. invalid</mat-error
        >
      </mat-form-field>

      <mat-form-field appearance="outline" *ngIf="mobileNoEntered">
        <input
          type="text"
          matInput
          placeholder=""
          formControlName="otp"
          required
          maxlength="6"
          (keypress)="isNumber($event)"
        />
        <span matSuffix style="cursor: pointer"
          ><a (click)="resendOtp()" class="resend-otp f-12">Resend OTP</a></span
        >
        <mat-error *ngIf="signupForm.controls['otp'].hasError('required')"
          >OTP is Required</mat-error
        >
        <mat-error
          *ngIf="
            !signupForm.controls['otp'].hasError('required') &&
            signupForm.controls['otp'].invalid
          "
          >OTP is invalid</mat-error
        >
      </mat-form-field>

      <div class="row" style="font-size: 12px">
        <span class="gray-font"
          >By proceeding you agree to our <a href="#">Terms of Services</a> and
          <a href="#">Privacy Policy</a></span
        >
      </div>
      <div class="text-center mt-3">
        <button
          *ngIf="!mobileNoEntered"
          mat-raised-button
          color="primary w-100"
          (click)="mobileNoEntered = !mobileNoEntered"
          [disabled]="!signupForm.controls.mobile.valid"
        >
          Next</button
        ><br />

        <button
          *ngIf="mobileNoEntered"
          [disabled]="!signupForm.valid"
          mat-raised-button
          color="primary w-100"
          (click)="otpVerified = !otpVerified; onSubmitOtp()"
        >
          Continue</button
        ><br />
      </div>
    </form>

    <ng-scrollbar autoHeightDisabled="false" autoWidthDisabled="false">
      <form
        [formGroup]="signupForm2"
        class="col mt-3"
        *ngIf="otpVerified"
        class="register-form"
      >
        <div class="profile-container">
          <img
            class="profile"
            src="../../../assets/images/image/anurag_goyal.jpg"
          />
          <input type="file" #file accept="image/png, image/jpeg" />
          <div class="profile-input" for="file" (click)="file.click()">
            <img
              class="camera"
              src="../../../assets/../assets/images/icons/camera.svg"
              alt=""
            />
          </div>
        </div>
        <mat-form-field appearance="outline" class="">
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/org-icon.svg"
                alt="" /></mat-icon
          ></span>
          <input
            type="text"
            matInput
            placeholder="Name of orgainization"
            formControlName="orgainization"
          />
          <mat-error
            *ngIf="signupForm2.controls['orgainization'].hasError('required')"
            >Name of Orgainization is Required</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline" class="">
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/people-icon.svg"
                alt="" /></mat-icon
          ></span>
          <input
            type="text"
            matInput
            placeholder="Enter your full name"
            formControlName="fullName"
            required
          />
          <mat-error
            *ngIf="signupForm2.controls['fullName'].hasError('required')"
            >Full name is Required</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline" class="">
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/people-icon.svg"
                alt="" /></mat-icon
          ></span>
          <input
            type="text"
            matInput
            placeholder="Enter Your Father's name"
            formControlName="fatherName"
            required
          />
          <mat-error
            *ngIf="signupForm2.controls['fatherName'].hasError('required')"
            >Father name is Required</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline" class="textArea">
          <span matPrefix style="height: 82px"
            ><mat-icon
              ><img
                src="../../../assets/images/icons/people-icon.svg"
                alt="" /></mat-icon
          ></span>
          <textarea
            id="text-area"
            type="text"
            matInput
            placeholder="Enter Your Core Competency"
            formControlName="coreCompetency"
            required
            rows="3"
            maxlength="200"
          ></textarea>
          <mat-error
            *ngIf="signupForm2.controls['coreCompetency'].hasError('required')"
            >Core Competency is Required</mat-error
          >
          <!-- <mat-error *ngIf="!signupForm2.controls['coreCompetency'].hasError('required') &&
                         signupForm2.controls['coreCompetency'].hasError('minlength')">Minimum 150 Characters
                        Required</mat-error> -->

          <mat-error
            *ngIf="
              !signupForm2.controls['coreCompetency'].hasError('required') &&
              signupForm2.controls['coreCompetency'].hasError('maxlength')
            "
            >Max Charaters Limit Reached</mat-error
          >
        </mat-form-field>

        <div class="mdc-label mb-2">Note: Describe in max 200 character.</div>

        <mat-form-field appearance="outline" class="">
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/location-icon.svg"
                alt="" /></mat-icon
          ></span>
          <input
            type="text"
            matInput
            placeholder="Enter your Address"
            formControlName="address"
            required
          />
          <mat-error
            *ngIf="signupForm2.controls['address'].hasError('required')"
            >Address is Required</mat-error
          >
        </mat-form-field>

        <mat-checkbox formControlName="isAddressVisible" [color]="'primary'">
          Display on Profile
        </mat-checkbox>

        <mat-form-field appearance="outline">
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/org-icon.svg"
                alt="" /></mat-icon
          ></span>
          <mat-select
            placeholder="Select State"
            formControlName="state"
            required
          >
            <mat-option *ngFor="let state of states" [value]="state.value">
              {{ state.viewValue }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="signupForm2.controls['state'].hasError('required')"
            >State is Required</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline">
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/org-icon.svg"
                alt="" /></mat-icon
          ></span>
          <mat-select placeholder="Select City" formControlName="city" required>
            <mat-option *ngFor="let city of cities" [value]="city.value">
              {{ city.viewValue }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="signupForm2.controls['city'].hasError('required')"
            >City is Required</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline">
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/phone-icon.svg"
                alt="" /></mat-icon
          ></span>
          <input
            type="text"
            matInput
            placeholder="Enter mobile number"
            formControlName="mobile"
            maxlength="10"
            [readonly]="true"
          />
          <mat-error *ngIf="signupForm2.controls['mobile'].hasError('required')"
            >Mobile No. is Required</mat-error
          >
          <mat-error
            *ngIf="
              !signupForm2.controls['mobile'].hasError('required') &&
              signupForm2.controls['mobile'].invalid
            "
            >Mobile No. invalid</mat-error
          >
        </mat-form-field>

        <div class="d-flex">
          <mat-checkbox
            formControlName="isPrimaryContactVisible"
            [color]="'primary'"
          >
            Display on Profile
          </mat-checkbox>
          <mat-checkbox
            formControlName="isPrimaryContactWhatsapp"
            [color]="'primary'"
          >
            Is Whatsapp No. ?
          </mat-checkbox>
        </div>

        <mat-form-field appearance="outline">
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/phone-icon.svg"
                alt="" /></mat-icon
          ></span>
          <input
            type="text"
            matInput
            placeholder="Enter Secondary Mobile number"
            formControlName="secondaryContact"
            maxlength="10"
            (keypress)="isNumber($event)"
          />
          <mat-error *ngIf="signupForm2.controls['secondaryContact'].invalid"
            >No. invalid</mat-error
          >
        </mat-form-field>

        <div class="d-flex">
          <mat-checkbox
            formControlName="isSecondaryContactVisible"
            [color]="'primary'"
          >
            Display on Profile
          </mat-checkbox>
          <mat-checkbox
            formControlName="isSecondaryContactWhatsapp"
            [color]="'primary'"
          >
            Is Whatsapp No. ?
          </mat-checkbox>
        </div>

        <mat-form-field appearance="outline">
          <input
            matInput
            placeholder="Enter your email"
            formControlName="email"
            required
          />
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/mail-icon.svg"
                alt="" /></mat-icon
          ></span>
          <mat-error *ngIf="signupForm2.controls['email'].hasError('required')"
            >Email is Required</mat-error
          >
          <mat-error
            *ngIf="
              !signupForm2.controls['email'].hasError('required') &&
              signupForm2.controls['email'].invalid
            "
            >Email is invalid</mat-error
          >
        </mat-form-field>

        <div class="row mb-2" style="font-size: 10px; font-family: Poppins">
          <span class="col-lg-8 col-md-8 gray-font"
            >Note: Email verification is needed for account recovery
            purpose</span
          >
          <button
            type="button"
            class="float-right col-lg-4 col-md-4 red-font"
            mat-button
            [disabled]="this.signupForm2.controls.email.value == ''"
            data-bs-toggle="modal"
            data-bs-target="#emailOtpModal"
          >
            (Not Verified)
          </button>
        </div>

        <mat-checkbox formControlName="isEmailVisible" [color]="'primary'">
          Display on Profile
        </mat-checkbox>

        <mat-form-field appearance="outline" class="password">
          <input
            matInput
            [type]="hidePassword ? 'password' : 'text'"
            formControlName="password"
            placeholder="Enter Password"
            required
          />
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/lock-icon.svg"
                alt="" /></mat-icon
          ></span>
          <button
            type="button"
            mat-icon-button
            matSuffix
            (click)="hidePassword = !hidePassword"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hidePassword"
          >
            <mat-icon>{{
              hidePassword ? "visibility_off" : "visibility"
            }}</mat-icon>
          </button>
          <mat-error
            *ngIf="signupForm2.controls['password'].errors?.['required']"
            >Password is Required !!</mat-error
          >
          <mat-error
            *ngIf="!signupForm2.controls['password'].errors?.['required'] && signupForm2.controls['password'].invalid"
            >Enter atleast 10 characters !!</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline" class="password">
          <input
            matInput
            [type]="hideConfirmPassword ? 'password' : 'text'"
            formControlName="confirmPassword"
            placeholder="Enter Confirm Password"
            required
          />
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/lock-icon.svg"
                alt="" /></mat-icon
          ></span>
          <button
            type="button"
            mat-icon-button
            matSuffix
            (click)="hideConfirmPassword = !hideConfirmPassword"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hideConfirmPassword"
          >
            <mat-icon>{{
              hideConfirmPassword ? "visibility_off" : "visibility"
            }}</mat-icon>
          </button>
          <mat-error
            *ngIf="signupForm2.controls['confirmPassword'].errors?.['required']"
            >Confirm Password is Required !!</mat-error
          >
          <mat-error
            *ngIf="
              signupForm2.controls['confirmPassword'].errors?.passwordMatch
            "
            >Password does not match</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline">
          <input
            matInput
            placeholder="Name of practising Court"
            formControlName="courtName"
            required
          />
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/stateBar-icon.svg"
                alt="" /></mat-icon
          ></span>
          <mat-error
            *ngIf="signupForm2.controls['courtName'].hasError('required')"
            >Court Name is Required</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline">
          <input
            matInput
            placeholder="Name of state bar"
            formControlName="stateBar"
            required
          />
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/document-icon.svg"
                alt="" /></mat-icon
          ></span>
          <mat-error
            *ngIf="signupForm2.controls['stateBar'].hasError('required')"
            >State Bar is Required</mat-error
          >
        </mat-form-field>

        <!-- <mat-grid-list cols="2" rowHeight="2:1">
                    <mat-grid-tile> -->
        <mat-form-field appearance="outline">
          <input
            matInput
            placeholder="Bar license no."
            formControlName="licenseNo"
            required
          />
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/barLicense-icon.svg"
                alt="" /></mat-icon
          ></span>
          <mat-error
            *ngIf="signupForm2.controls['licenseNo'].hasError('required')"
            >License No. is Required</mat-error
          >
        </mat-form-field>
        <!-- </mat-grid-tile>
                    <mat-grid-tile> -->
        <mat-form-field appearance="outline">
          <input
            matInput
            placeholder="Enter Bar Registration Year"
            (keypress)="isNumber($event)"
            maxlength="4"
            formControlName="practiceYear"
            required
          />
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/calendar-icon.svg"
                alt="" /></mat-icon
          ></span>
          <mat-error
            *ngIf="signupForm2.controls['practiceYear'].hasError('required')"
            >Practice year is Required</mat-error
          >
        </mat-form-field>

        <mat-form-field class="example-chip-list" appearance="outline">
          <mat-chip-grid #chipGrid formControlName="practiceField" required>
            <mat-chip-row
              (removed)="remove(field)"
              *ngFor="let field of displayField"
            >
              {{ field }}
              <button
                type="button"
                matChipRemove
                [attr.aria-label]="'remove ' + field"
              >
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip-row>
            <input
              placeholder=""
              #fieldInput
              [matChipInputFor]="chipGrid"
              [matAutocomplete]="auto"
              [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
              placeholder="Practising Field"
            />
          </mat-chip-grid>
          <mat-autocomplete
            #auto="matAutocomplete"
            (optionSelected)="selected($event)"
          >
            <mat-option [value]="item" *ngFor="let item of fields">{{
              item.viewValue
            }}</mat-option>
          </mat-autocomplete>
          <span matPrefix
            ><mat-icon
              ><img
                src="../../../assets/images/icons/field-icon.svg"
                alt="" /></mat-icon
          ></span>
          <mat-error
            *ngIf="signupForm2.controls['practiceField'].hasError('required')"
            >Practice Field is Required</mat-error
          >
        </mat-form-field>

        <!-- <mat-form-field appearance="outline">
                <mat-select placeholder="Select security question" formControlName="question" required>
                    <mat-option *ngFor="let qus of queries" [value]="qus.value">
                        {{ qus.viewValue }}
                    </mat-option>
                </mat-select>
                <span matPrefix><mat-icon>receipt_long</mat-icon></span>
                <mat-error *ngIf="signupForm2.controls['question'].hasError('required')">Question is
                    Required</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <input matInput placeholder="Enter your answer" formControlName="answer" required />
                <span matPrefix><mat-icon>message</mat-icon></span>
                <mat-error *ngIf="signupForm2.controls['answer'].hasError('required')">Answer is Required</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-select placeholder="Select security question" formControlName="question2" required>
                    <mat-option *ngFor="let qus of queries" [value]="qus.value">
                        {{ qus.viewValue }}
                    </mat-option>
                </mat-select>
                <span matPrefix><mat-icon>receipt_long</mat-icon></span>
                <mat-error *ngIf="signupForm2.controls['question2'].hasError('required')">Question is
                    Required</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <input matInput placeholder="Enter your answer" formControlName="answer2" required />
                <span matPrefix><mat-icon>message</mat-icon></span>
                <mat-error *ngIf="signupForm2.controls['answer2'].hasError('required')">Answer is Required</mat-error>
            </mat-form-field> -->

        <div class="mt-3">
          <button
            mat-raised-button
            color="primary w-100"
            data-bs-toggle="modal"
            data-bs-target="#accVerificationModal"
            [disabled]="!signupForm2.valid"
          >
            Continue</button
          ><br />
        </div>
      </form>
    </ng-scrollbar>
  </div>
  <div class="col-lg-7 col-md-7">
    <!-- image-container d-flex align-item-center justify-content-center -->
    <img
      src="../../../assets/images/image/vidhik-animated.gif"
      alt=""
      style="width: 100%; height: 100vh"
    />
  </div>
</div>

<!--Account Verification Modal -->
<div
  class="modal fade"
  id="accVerificationModal"
  tabindex="-1"
  aria-labelledby="accVerificationModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="accVerificationModalLabel">
          Verify Your Account
        </h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <p>
          Thank you for your registration. We are committed to ensuring the
          security of your profile. In order to complete the verification
          process, we will be conducting a thorough review. Please note that
          this process may take up to 48 hours. Once the verification is
          complete, we will send you a password to the phone number associated
          with your account. We appreciate your patience and understanding.
        </p>
        <div class="text-center">
          <button
            type="button"
            mat-raised-button
            color="primary"
            data-bs-dismiss="modal"
            style="width: fit-content !important"
            routerLink="/auth/login"
          >
            Ok
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Email Otp Verification Modal -->
<div
  class="modal fade"
  id="emailOtpModal"
  tabindex="-1"
  aria-labelledby="otpModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="otpModalLabel">Email Verification</h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="head-text">Enter Verification Code</div>
        <div class="sub-text mt-2 mb-4">
          We sent a 6-digit code to<br />
          <span class="email mt-2">{{ signupForm2.controls.email.value }}</span>
        </div>
        <ng-otp-input
          (onInputChange)="onOtpChange($event)"
          [config]="{ length: 6 }"
          class="mt-2"
        ></ng-otp-input>
        <div
          class="d-flex align-items-center justify-content-center"
          style="flex-direction: column"
        >
          <button
            mat-button
            color="primary"
            style="font-size: 12px"
            class="mt-4"
          >
            Request a new Code
          </button>
          <button
            mat-raised-button
            color="primary"
            style="width: fit-content !important"
            class="mt-2"
          >
            Verify
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
